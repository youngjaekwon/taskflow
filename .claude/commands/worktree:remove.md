$ARGUMENTS를 파싱하여 git worktree와 브랜치를 안전하게 삭제하라.

## 입력

```
$ARGUMENTS
```

삭제할 워크트리의 브랜치명을 받는다. 비어있으면 목록에서 선택하도록 안내한다.

## 절차

### 1. 워크트리 목록 조회

`git worktree list --porcelain`을 실행하여 현재 워크트리 목록을 파악한다.

### 2. 대상 결정

- **`$ARGUMENTS`가 있으면**: 해당 브랜치명과 일치하는 워크트리를 찾는다. 일치하는 워크트리가 없으면 현재 워크트리 목록을 보여주며 안내하고 종료한다.
- **`$ARGUMENTS`가 비어있으면**: main을 제외한 워크트리 목록을 보여주고, AskUserQuestion 도구를 사용하여 어떤 워크트리를 삭제할지 사용자에게 물어본다. 워크트리가 main밖에 없으면 "삭제할 워크트리가 없습니다."를 출력하고 종료한다.

### 3. 안전 검사 (하나라도 실패하면 즉시 종료)

대상이 결정되면 아래 검사를 **반드시 모두** 수행한다:

#### 3-a. 커밋되지 않은 변경사항 확인

해당 워크트리 디렉터리에서 `git -C <워크트리경로> status --porcelain`을 실행한다.
출력이 있으면 (변경사항 존재) 아래를 출력하고 **종료**:

```
삭제를 중단합니다.

`<브랜치명>` 워크트리에 커밋되지 않은 변경사항이 있습니다:
<git status 출력>

변경사항을 먼저 커밋하거나 스태시한 뒤 다시 시도하세요.
```

#### 3-b. 열린 PR 확인

`gh pr list --head <브랜치명> --state open --json title,url`을 실행한다.
열린 PR이 있으면 아래를 출력하고 **종료**:

```
삭제를 중단합니다.

`<브랜치명>` 브랜치에 열린 PR이 있습니다:
<PR 제목 및 URL>

PR을 먼저 머지하거나 닫은 뒤 다시 시도하세요.
```

`gh` CLI가 설치되어 있지 않거나 인증되지 않아 명령이 실패하면, PR 검사를 건너뛰고 경고를 출력한 뒤 나머지 절차를 계속 진행한다:

```
경고: gh CLI를 사용할 수 없어 PR 검사를 건너뜁니다.
```

### 4. 삭제 실행 (순서대로)

안전 검사를 모두 통과하면 아래 순서로 삭제한다:

#### 4-a. 워크트리 디렉터리 제거

```bash
git worktree remove <워크트리경로>
```

#### 4-b. 로컬 브랜치 삭제

```bash
git branch -d <브랜치명>
```

`-d` (안전 삭제)를 사용한다. 만약 merge되지 않은 브랜치라서 실패하면:
- 상황을 안내하고 AskUserQuestion 도구로 `-D` (강제 삭제)를 사용할지 사용자에게 물어본다
- 사용자가 동의하면 `git branch -D <브랜치명>` 실행
- 사용자가 거부하면 브랜치 삭제를 건너뛰고 안내

#### 4-c. 원격 브랜치 삭제

`git ls-remote --heads origin <브랜치명>`으로 원격 브랜치 존재 여부를 확인한다.

- 존재하면: `git push origin --delete <브랜치명>` 실행
- 존재하지 않으면: 건너뛴다

### 5. 결과 출력

모든 삭제가 완료되면 아래 형식으로 결과를 출력한다:

```
워크트리가 삭제되었습니다.

- 브랜치: `<브랜치명>` (로컬 삭제됨)
- 원격: `origin/<브랜치명>` (삭제됨 / 원격 브랜치 없음)
- 경로: `<워크트리경로>` (디렉터리 삭제됨)
```

## 에러 처리

- 지정한 브랜치에 해당하는 워크트리가 없으면 → 현재 워크트리 목록을 보여주며 안내한다
- `git worktree remove` 실패 시 → 에러 메시지를 그대로 전달한다
- `git branch -d` 실패 (merge 안 된 브랜치) → 안내 후 `-D` 강제 삭제 여부를 사용자에게 물어본다
- `gh` CLI가 없거나 인증 안 됨 → PR 검사를 건너뛰고 경고 출력 후 나머지 진행
- main 브랜치를 삭제 대상으로 지정하면 → "main 브랜치는 삭제할 수 없습니다."를 출력하고 종료한다

## 사용법 안내

`$ARGUMENTS`가 비어있고 삭제 가능한 워크트리도 없을 때 아래를 출력한다:

```
사용법: /worktree:remove [브랜치명]

예시:
  /worktree:remove feat/web/add-task-list
  /worktree:remove fix/backend-graphene/handle-empty-query
  /worktree:remove                          # 목록에서 선택

브랜치명을 생략하면 현재 워크트리 목록에서 선택할 수 있습니다.
```
